
{% extends 'base.html.twig' %}

{% block title %}Stock{% endblock %}

{% block body %}
<!-- preloader area start -->
<div class="preloader" id="preloader">
    <div class="loader loader-1">
        <div class="loader-outter"></div>
        <div class="loader-inner"></div>
    </div>
</div>
<div class="mainmenu-area">
    <div class="container">
        <div class="row">
            <div class="col-lg-12">
                <nav class="navbar navbar-expand-lg navbar-light">
                   
                    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#main_menu"
                        aria-controls="main_menu" aria-expanded="false" aria-label="Toggle navigation">
                        <span class="navbar-toggler-icon"></span>
                    </button>
                    <div class="collapse navbar-collapse fixed-height" id="main_menu">
                        <ul class="navbar-nav ml-auto">
                        <!-- Add this search form at the top of your template -->
                        

                        <div>
                        <br>
<input type="text" id="searchInput" placeholder="Search by product name">

</div>
                            <li class="nav-item">
                                <a class="nav-link active" href="#">Home</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="#">About</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="#">Investment</a>
                            </li>
                            
                             
                            <li class="nav-item dropdown">
                                <a class="nav-link dropdown-toggle" href="#" role="button"
                                    data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                    Pages
                                </a>
                                <div class="dropdown-menu">
                                     <a class="dropdown-item" href="{{ path('app_stock_index') }}">stock</a>
                                            <a class="dropdown-item" href="{{ path('app_demand_index') }}">votre demand</a>
                                            <a class="dropdown-item" href="signin.html">bid</a>
                                            <a class="dropdown-item" href="{{ path('app_user') }}">panier</a>
                                            <a class="dropdown-item" href="forgot-pass.html">reclamation</a>
                                    
                                </div>
                            </li>
                            <li class="nav-item dropdown">
                                <a class="nav-link dropdown-toggle" href="#" role="button"
                                    data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                    Blog
                                </a>
                                <div class="dropdown-menu">
                                    <a class="dropdown-item" href="#">Blog Grid</a>
                                    <a class="dropdown-item" href="#">Blog With Sidebar</a>
                                    <a class="dropdown-item" href="#">Blog Details</a>
                                </div>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="#footer">Contact</a>
                            </li>
                        </ul>
                        <a href="#" class="base-btn2">Login</a>
                    </div>
                </nav>
            </div>
        </div>
    </div>
</div>
<div class="hero-area" id="hero-area">
    <div class="container">
        <h1 class="text-center mb-4">Stock</h1>
        <div></div>
        
{# <div id="searchResults"></div> #}

        <div class="row" id="searchResults" >
        
             {% for stock in pagination %}   
            <div class="col-lg-4 col-md-6">

                <div class="single-counter" style="border-radius: 20px">
                    <div class="icon">
                        <i class="flaticon-sticker"></i>
                    </div>
                    <div class="content">
                        <h6 class="sub-title">{{ stock.produitname }}</h6>
                        <p>{{ stock.quantite }}</p>
                        <p>{{ stock.mail }}</p>
                        <p>{{ stock.getIdCat().getCategoryName() }}</p>
                        <p>your rate:{{ stock.averageRating }}</p> 

                         <a href="{{ path('rate_app', {'id': stock.id}) }}" class="btn btn-primary">Rate</a>
                    </div>
                </div>
   
            </div>
 
            {% else %}
            <div class="col-lg-12">
                <p>No records found.</p>
            </div>
            {% endfor %}
        </div>
        
        <!-- Pagination links -->
<div class="pagination">
    {{ knp_pagination_render(pagination) }}
</div>
        <div class="text-center mt-3">
            <a href="{{ path('app_stock_new') }}" class="btn btn-primary">Create new</a>
        </div>
        
        <div class="text-center mt-3">
        <a href="{{ path('app_pdf_generate') }}" class="btn btn-primary">Télécharger PDF</a>
        </div>
    </div>
</div>
<footer class="footer" id="footer">
<div class="col-sm-6 col-lg-4">
					<div class="footer-widget info-link-widget link-w-2">
						<h4 class="title">
							codecomanders
						</h4>
						<ul class="link-list">
							<li>
								<a href="#">
									<i class="fas fa-angle-double-right"></i> Terms
								</a>
							</li>
							<li>
								<a href="#">
									<i class="fas fa-angle-double-right"></i> Privacy
								</a>
							</li>
							<li>
								<a href="#">
									<i class="fas fa-angle-double-right"></i>Security
								</a>
							</li>
							<li>
								<a href="#">
									<i class="fas fa-angle-double-right"></i>Support
								</a>
							</li>
							<li>
								<a href="#">
									<i class="fas fa-angle-double-right"></i>Careers
								</a>
							</li>
						</ul>
					</div>
				</div>
			</div>
		</div>
		<div class="copy-bg">
			<div class="container">
				<div class="row">
					<div class="col-lg-5">
						<div class="left-area">
							<p>Copyright © 2024. All Rights Reserved By Codecomanders.
							</p>
                            <p>you can call us for any details on : +216 22 097 795
                            or contact us on our social media:
							</p>
						</div>
					</div>
					<div class="col-lg-7">
						<ul class="social-links">
							<li>
								<a href="#" data-toggle="tooltip" data-placement="top" title="Facebook">
									<i class="fab fa-facebook-f">  Codecomanders</i>
								</a>
							</li>
							<li>
								<a href="#" data-toggle="tooltip" data-placement="top" title="Twitter">
									<i class="fab fa-twitter">  @CodeComanders</i>
								</a>
							</li>
							<li>
								<a href="#" data-toggle="tooltip" data-placement="top" title="Linkedin">
									<i class="fab fa-linkedin-in">  @CodeComanders.tn</i>
								</a>
							</li>
							<li>
								<a href="#" data-toggle="tooltip" data-placement="top" title="Instagram">
									<i class="fab fa-instagram">  @CodeComanders</i>
								</a>
							</li>
							
						</ul>
					</div>
				</div>
			</div>
		</div>
	</footer>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<script>
function searchStock(query) {
    $.ajax({
        url: '{{ path('stock_search_ajax') }}',
        type: 'GET',
        data: { query: query },
        success: function(response) {
            $('#searchResults').html(response);
        },
        error: function(xhr, status, error) {
            console.error('Error:', error);
        }
    });
}

// Event listener to trigger search when the user types in the search input
$('#searchInput').on('input', function() {
    var query = $(this).val();
    searchStock(query);
});
</script>
<script>
// Event listener to trigger sorting by price when the button is clicked
$('#sortButton').on('click', function() {
    // Make an AJAX request to reload the page with sorted products
    window.location.href = '{{ path('app_stock_index') }}?sort=price';
});
</script>

{% endblock %}
